<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>lftest</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.map { width: 300px; height: 600px;}
      a.selector { border-width:1px; border-style: solid; margin=10px; padding=10px; font-size: 80%; border-radius: 3px; background-color: #E1ECF4; color: #07C; text-decoration: none; cursor: pointer; }
      a.selector2 { border-width:1px; border-style: solid; margin=10px; padding=10px; font-size: 80%; border-radius: 3px; background-color: #E1ECF4; color: #07C; text-decoration: none; cursor: pointer; }
      div.palabras{ width: 300px; float:left }
	.info {
	padding: 6px 8px;
	font: 14px/16px Arial, Helvetica, sans-serif;
	background: white;
	background: rgba(255,255,255,0.8);
	box-shadow: 0 0 15px rgba(0,0,0,0.2);
	border-radius: 5px;
	}
	.legend {
	background-color: "black";
	line-height: 25px;
	color: #555;
	width: auto;
	}
	.legend i {
	width: 18px;
	height: 18px;
	float: left;
	margin-right: 8px;
	opacity: 0.7;
	}
	div.mapcont{ max-width: 350px; float: left}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->

 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

 <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
 <!-- Jquery -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
 <script>
 </script>



</head>
<body>

<script src="gis/leyes-layer.js" type="text/javascript"></script>
<script>

function make_map(columna,mapa) {
	$('#'+mapa).remove();
	$('#'+mapa+'container').append('<div id='+mapa+' class="map"> </div>');
	varvals = prov_leyes.features.map(f => Number(f.properties[columna]));
	max = Math.max(...varvals);

	function getColor(d) {
		return d > Math.floor(max * 0.8) ? '#F9F4EC' :
		       d > Math.floor(max * 0.6) ? '#A95AA1' :
		       d > Math.floor(max * 0.4) ? '#63ACBE' :
		       d > Math.floor(max * 0.2) ? '#EE442f' :
				 '#681A4A';
	}


	var legend = L.control({position: 'bottomright'});


	legend.onAdd = function (map) { 
	var div = L.DomUtil.create('div', 'info legend'),
	grades = [0,Math.floor(max * 0.2),Math.floor(max * 0.4),Math.floor(max * 0.6),Math.floor(max * 0.8)];

	div.innerHTML += columna + '<br>';

	for (var i = 0; i < grades.length; i++) {
	div.innerHTML += '<i style="background:' + getColor(grades[i] + 0.01) + '"></i> ' + grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
	}
	return div;
	};


	var map = L.map(mapa).setView([-40, -63], 4);
	L.geoJSON(prov_leyes, {
		style: function (feature) {var mag = Number(feature.properties[columna]);
					   return { color: "#999" , weight: 0.5, fillColor: getColor(mag), fillOpacity: 1};
					   }
		}
	).addTo(map);

	legend.addTo(map);
}

</script>

<div id="mapcontainer" class="mapcont">
<div class="palabras">
<a class="selector" >mensura</a>
<a class="selector" >agrimensor</a>
<a class="selector" >escribano</a>
<a class="selector" >impuesto</a>
</div>
<div id="map" class="map"> </div>
</div>

<script>
    $(document).ready(function() {
        $('a.selector').click(function() {
            make_map(this.innerText,'map');
        });
    });
</script>

<div id="map2container" class="mapcont">
<div class="palabras">
<a class="selector2" >mensura</a>
<a class="selector2" >agrimensor</a>
<a class="selector2" >escribano</a>
<a class="selector2" >impuesto</a>
</div>
<div id="map2" class="map"> </div>
</div>

<script>
    $(document).ready(function() {
        $('a.selector2').click(function() {
            make_map(this.innerText,'map2');
        });
    });
</script>

<script>
make_map('mensura','map');
make_map('agrimensor','map2');
</script>

</body>
</html>
